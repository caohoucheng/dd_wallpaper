(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-editNickname"],{"143b":function(n,e,t){"use strict";t.r(e);var a=t("274d"),o=t("2765");for(var i in o)"default"!==i&&function(n){t.d(e,n,(function(){return o[n]}))}(i);t("9f14");var c,u=t("f0c5"),r=Object(u["a"])(o["default"],a["b"],a["c"],!1,null,"5402ea60",null,!1,a["a"],c);e["default"]=r.exports},"274d":function(n,e,t){"use strict";var a;t.d(e,"b",(function(){return o})),t.d(e,"c",(function(){return i})),t.d(e,"a",(function(){return a}));var o=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"all"},[t("v-uni-button",{staticClass:"saveNick",attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.upload.apply(void 0,arguments)}}},[n._v("换头像")])],1)},i=[]},2765:function(n,e,t){"use strict";t.r(e);var a=t("5e59"),o=t.n(a);for(var i in a)"default"!==i&&function(n){t.d(e,n,(function(){return a[n]}))}(i);e["default"]=o.a},"5e59":function(n,e,t){"use strict";(function(n){var a=t("4ea4");t("d3b7"),t("ac1f"),t("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(t("5530"));t("96cf");var i=a(t("1da1")),c={data:function(){return{changeValue:""}},onLoad:function(n){this.changeValue=n.nickName},methods:{onSet:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.changeValue){t.next=3;break}return uni.showToast({title:"请输入昵称",icon:"none"}),t.abrupt("return");case 3:return a=uni.getStorageSync("token"),uni.showLoading({title:"处理中..."}),t.next=7,n.callFunction({name:"update",data:{_id:a,nickname:e.changeValue,createTime:Date.now()}}).then((function(n){return console.log(n),uni.hideLoading(),uni.showModal({content:"更新成功",showCancel:!1,success:function(n){n.confirm&&uni.navigateBack({delta:1})}}),n.result.msg})).catch((function(n){uni.hideLoading(),uni.showModal({content:"更新操作执行失败，错误信息为：".concat(n.message),showCancel:!1}),console.error(n)}));case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))()},upload:function(){var e=uni.getStorageSync("token");new Promise((function(n,e){uni.chooseImage({count:1,success:function(e){var t,a=e.tempFilePaths[0];t=e.tempFiles[0].name.split(".").pop();var o={filePath:a,cloudPath:Date.now()+"."+t};n(o)},fail:function(){e(new Error("Fail_Cancel"))}})})).then((function(e){return uni.showLoading({title:"文件上传中..."}),n.uploadFile((0,o.default)((0,o.default)({},e),{},{onUploadProgress:function(n){console.log(n)}}))})).then((function(t){console.log(t),uni.showLoading({title:"处理中..."}),n.callFunction({name:"update",data:{_id:e,avatarUrl:t.fileID,createTime:Date.now()}}).then((function(n){uni.hideLoading(),uni.showModal({content:"头像更换成功",showCancel:!1,success:function(n){n.confirm&&uni.navigateBack({delta:1})}})})).catch((function(n){uni.hideLoading(),uni.showModal({content:"更新操作执行失败，错误信息为：".concat(n.message),showCancel:!1}),console.error(n)}))})).catch((function(n){uni.hideLoading(),console.log(n),"Fail_Cancel"!==n.message&&uni.showModal({content:"图片上传失败，错误信息为：".concat(n.message),showCancel:!1})}))}}};e.default=c}).call(this,t("a9ff")["default"])},"7a80":function(n,e,t){var a=t("24fb");e=a(!1),e.push([n.i,".all .modify[data-v-5402ea60]{display:flex;justify-content:space-between;padding:%?32?% %?20?%;background:#fff;border-bottom:1px solid #e5e5e5}.all .modify uni-input[data-v-5402ea60]{flex:1}.all .modify uni-icon[data-v-5402ea60]{font-size:%?22?%;color:#e5e5e5}.all .saveNick[data-v-5402ea60]{width:80%;margin:60px auto 0 auto;font-size:%?32?%;color:#fff;height:%?80?%;line-height:%?80?%;text-align:center;letter-spacing:2px;background:#ffb222;border-radius:%?4?%}",""]),n.exports=e},"9f14":function(n,e,t){"use strict";var a=t("ad0b"),o=t.n(a);o.a},ad0b:function(n,e,t){var a=t("7a80");"string"===typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);var o=t("4f06").default;o("28edc384",a,!0,{sourceMap:!1,shadowMode:!1})}}]);