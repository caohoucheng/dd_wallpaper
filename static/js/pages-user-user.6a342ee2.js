(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-user"],{"17ab":function(n,e,i){"use strict";i.r(e);var a=i("b9b1"),t=i.n(a);for(var o in a)"default"!==o&&function(n){i.d(e,n,(function(){return a[n]}))}(o);e["default"]=t.a},3765:function(n,e,i){"use strict";var a;i.d(e,"b",(function(){return t})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var t=function(){var n=this,e=n.$createElement,i=n._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"personal"},[i("v-uni-view",{staticClass:"personal-main",on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.editInfo.apply(void 0,arguments)}}},[i("v-uni-image",{attrs:{src:n.userInfo.avatarUrl||"../../static/fumou-center-template/header.jpg",mode:"aspectFill"}}),i("v-uni-view",{staticClass:"personal-info"},[i("v-uni-view",{staticClass:"name"},[n._v(n._s(n.userInfo.nickname||"神秘的网友"))])],1)],1)],1),i("v-uni-view",{staticClass:"list"},[i("v-uni-view",{staticClass:"item",on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.uploadAddImage.apply(void 0,arguments)}}},[n._v("上传图片")]),i("v-uni-view",{staticClass:"item",on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.onTapToMineImage.apply(void 0,arguments)}}},[n._v("我的图库")])],1)],1)},o=[]},"3f71":function(n,e,i){"use strict";i.r(e);var a=i("3765"),t=i("17ab");for(var o in t)"default"!==o&&function(n){i.d(e,n,(function(){return t[n]}))}(o);i("a6ca");var c,s=i("f0c5"),u=Object(s["a"])(t["default"],a["b"],a["c"],!1,null,"0d063f1c",null,!1,a["a"],c);e["default"]=u.exports},"9c36":function(n,e,i){var a=i("24fb");e=a(!1),e.push([n.i,".personal-main[data-v-0d063f1c]{display:flex;min-height:%?200?%;box-sizing:border-box;align-items:center;padding:%?20?%}.personal-main uni-image[data-v-0d063f1c]{width:%?150?%;height:%?150?%;border-radius:50%;margin-right:%?30?%}.personal-main .personal-info .name[data-v-0d063f1c]{font-size:%?40?%;height:%?60?%}.list[data-v-0d063f1c]{width:90%;min-height:%?100?%;margin-left:5%}.list .item[data-v-0d063f1c]{width:100%;height:%?90?%;border-bottom:1px solid #dcdcdc;display:flex;align-items:center;font-size:%?30?%;box-sizing:border-box;padding:0 %?10?%}",""]),n.exports=e},a6ca:function(n,e,i){"use strict";var a=i("f65f"),t=i.n(a);t.a},b9b1:function(n,e,i){"use strict";(function(n){var a=i("4ea4");i("d3b7"),i("ac1f"),i("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(i("5530")),o={data:function(){return{userInfo:{}}},onShow:function(){this.userInfoDate()},methods:{userInfoDate:function(){var n=this,e=uni.getStorageSync("token");e&&this.$cloud({name:"searchUser",data:{_id:e}}).then((function(e){console.log(e),n.userInfo=e.data[0]}))},editInfo:function(){var e=uni.getStorageSync("token");e?new Promise((function(n,e){uni.chooseImage({count:1,success:function(e){var i,a=e.tempFilePaths[0];i=e.tempFiles[0].name.split(".").pop();var t={filePath:a,cloudPath:Date.now()+"."+i};n(t)},fail:function(){e(new Error("Fail_Cancel"))}})})).then((function(e){return uni.showLoading({title:"文件上传中..."}),n.uploadFile((0,t.default)((0,t.default)({},e),{},{onUploadProgress:function(n){console.log(n)}}))})).then((function(i){console.log(i),uni.showLoading({title:"处理中..."}),n.callFunction({name:"update",data:{_id:e,avatarUrl:i.fileID,createTime:Date.now()}}).then((function(n){console.log(n),uni.hideLoading(),1==n.result.status?uni.showModal({content:"头像更换成功",showCancel:!1,success:function(n){n.confirm&&uni.navigateBack({delta:1})}}):uni.showToast({title:"更新失败",icon:"none"})})).catch((function(n){uni.hideLoading(),uni.showModal({content:"更新操作执行失败，错误信息为：".concat(n.message),showCancel:!1}),console.error(n)}))})).catch((function(n){uni.hideLoading(),console.log(n),"Fail_Cancel"!==n.message&&uni.showModal({content:"图片上传失败，错误信息为：".concat(n.message),showCancel:!1})})):uni.navigateTo({url:"/pages/login/index"})},uploadAddImage:function(){var e=this,i=uni.getStorageSync("token");i?i?uni.chooseImage({count:1,success:function(a){if(a.tempFilePaths.length>0){uni.showLoading({title:"上传中..."});var t=a.tempFilePaths[0];uni.showLoading({title:"处理中..."}),n.uploadFile({filePath:t,cloudPath:Date.now()+".png",success:function(a){var t=a.fileID;n.callFunction({name:"uploadAddImage",data:{imageUrl:t,createTime:Date.now(),_id:i,mobile:e.userInfo.mobile,avatarUrl:e.userInfo.avatarUrl,nickname:e.userInfo.nickname},success:function(n){uni.showToast({title:"上传成功",icon:"success"}),uni.hideLoading(),console.log(n)},fail:function(n){uni.hideLoading(),console.log(n),uni.showToast({title:"上传失败",icon:"none"})},complete:function(){}})},fail:function(n){console.log(n),uni.showToast({title:"上传失败",icon:"none"}),uni.hideLoading()},complete:function(){}})}}}):uni.redirectTo({url:"/pages/login/index"}):uni.navigateTo({url:"/pages/login/index"})},onTapToMineImage:function(){var n=uni.getStorageSync("token");n?uni.navigateTo({url:"/pages/user/mineImage"}):uni.navigateTo({url:"/pages/login/index"})}}};e.default=o}).call(this,i("a9ff")["default"])},f65f:function(n,e,i){var a=i("9c36");"string"===typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);var t=i("4f06").default;t("400a0106",a,!0,{sourceMap:!1,shadowMode:!1})}}]);